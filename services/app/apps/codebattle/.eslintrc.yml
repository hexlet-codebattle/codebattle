---
root: true

env:
  node: true
  browser: true
  jest: true

parser: "@babel/eslint-parser"

parserOptions:
  requireConfigFile: false
  ecmaVersion: latest
  sourceType: module
  ecmaFeatures:
    jsx: true

plugins:
  - react
  - jsx-a11y
  - jest
  - react-hooks

extends:
  - airbnb
  - plugin:jest/recommended

settings:
  react:
    version: detect
  import/resolver:
    alias:
      map:
        - ["@", "./assets/js"]
      extensions:
        - ".js"
        - ".jsx"
        - ".json"

rules:
  # --- general ---
  no-console: off
  no-param-reassign: off
  class-methods-use-this: off
  default-param-last: off
  indent: off
  template-curly-spacing: off
  max-len: ["error", 140, 2]

  # --- imports ---
  import/no-unresolved: off
  import/extensions: off
  import/no-extraneous-dependencies:
    - error
    - devDependencies: true
  import/order:
    - error
    - newlines-between: always
      alphabetize:
        order: asc
        caseInsensitive: true
      groups:
        - builtin
        - external
        - internal
        - parent
        - sibling
        - index
      pathGroups:
        - pattern: react
          group: builtin
        - pattern: "@/**"
          group: internal
      pathGroupsExcludedImportTypes:
        - internal

  # --- react ---
  react/prop-types: off
  react/no-unused-prop-types: off
  react/jsx-props-no-spreading: off
  react/static-property-placement: off
  react/state-in-constructor: off
  react/jsx-no-useless-fragment: off
  react/no-unstable-nested-components: off
  react/jsx-no-constructed-context-values: warn

  # --- hooks ---
  react-hooks/rules-of-hooks: error
  react-hooks/exhaustive-deps: warn

  # --- jest ---
  jest/no-disabled-tests: warn
  jest/no-focused-tests: error
  jest/no-identical-title: error
  jest/prefer-to-have-length: warn
  jest/valid-expect: error

  # --- a11y ---
  jsx-a11y/label-has-associated-control:
    - error
    - assert: either

  # --- safety (keep these ON) ---
  no-unsafe-optional-chaining: error

overrides:
  - files:
      - "**/__tests__/**/*.{js,jsx}"
      - "**/*.{test,spec}.{js,jsx}"
    rules:
      func-names: off
      no-constructor-return: off
      react/jsx-no-useless-fragment: off
